<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: KNNRecommenderPredict</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for td_knn_recommender_predict_mle {tdplyr}"><tr><td>td_knn_recommender_predict_mle {tdplyr}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>
KNNRecommenderPredict
</h2>

<h3>Description</h3>

<p>The KNNRecommenderPredict function applies the model output by the KNNRecommender 
Train function to predict the ratings or preferences that users would assign to 
entities like books, songs, movies and other products.
</p>


<h3>Usage</h3>

<pre>
  td_knn_recommender_predict_mle (
      object = NULL,
      ratings.data = NULL,
      weights.data = NULL,
      bias.data = NULL,
      userid.column = NULL,
      itemid.column = NULL,
      rating.column = NULL,
      topk = 3,
      ratings.data.sequence.column = NULL,
      weights.data.sequence.column = NULL,
      bias.data.sequence.column = NULL,
      ratings.data.partition.column = NULL,
      ratings.data.order.column = NULL,
      weights.data.order.column = NULL,
      bias.data.order.column = NULL,
      showall = TRUE
  )
  
  ## S3 method for class 'td_knn_recommender_mle'
predict(
      object = NULL,
      ratings.data = NULL,
      weights.data = NULL,
      bias.data = NULL,
      userid.column = NULL,
      itemid.column = NULL,
      rating.column = NULL,
      topk = 3,
      ratings.data.sequence.column = NULL,
      weights.data.sequence.column = NULL,
      bias.data.sequence.column = NULL,
      ratings.data.partition.column = NULL,
      ratings.data.order.column = NULL,
      weights.data.order.column = NULL,
      bias.data.order.column = NULL,
      showall = TRUE
  )
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>object</code></td>
<td>

<p>Specifies the name of the object returned by the KNNRecommenderTrain 
<code><a href="td_knn_recommender_mle.html">td_knn_recommender_mle</a></code> function. For <code>td_knn_recommender_predict_mle</code> 
function, this is an optional argument, if both the arguments &quot;weights.data&quot; and 
&quot;bias.data&quot; are specified. For S3 <code>predict</code> function, this is a required argument. 
Whenever the argument &quot;object&quot; is specified, the arguments &quot;weights.data&quot; and &quot;bias.data&quot; 
will be overwritten by their equivalent objects of class &quot;tbl_teradata&quot; within &quot;object&quot; 
argument.
</p>
</td></tr>
<tr valign="top"><td><code>ratings.data</code></td>
<td>

<p>Required Argument.<br />
Specifies the user rating tbl_teradata on which the predictions are to be made.
</p>
</td></tr>
<tr valign="top"><td><code>ratings.data.partition.column</code></td>
<td>

<p>Required Argument.<br />
Specifies Partition By columns for &quot;ratings.data&quot;.<br />
Values to this argument can be provided as a vector, if multiple 
columns are used for partition.<br />
Types: character OR vector of Strings (character)
</p>
</td></tr>
<tr valign="top"><td><code>ratings.data.order.column</code></td>
<td>

<p>Optional Argument.<br />
Specifies Order By columns for &quot;ratings.data&quot;.<br />
Values to this argument can be provided as a vector, if multiple 
columns are used for ordering.<br />
Types: character OR vector of Strings (character)
</p>
</td></tr>
<tr valign="top"><td><code>weights.data</code></td>
<td>

<p>optional argument.<br />
Specifies the tbl_teradata generated by <code><a href="td_knn_recommender_mle.html">td_knn_recommender_mle</a></code> containing the 
interpolation weights. For S3 <code>predict</code> function, this argument is 
not required. For KNNRecommenderPredict function function, this is an 
optional argument. For KNNRecommenderPredict function function, if this 
argument is not specified, argument &quot;object&quot; must be specified. Whenever
the argument &quot;object&quot; is specified, arguments &quot;weights.data&quot; and 
&quot;bias.data&quot; will be overwritten by their equivalent tibbles
within &quot;object&quot; argument.
</p>
</td></tr>
<tr valign="top"><td><code>weights.data.order.column</code></td>
<td>

<p>Optional Argument.<br />
Specifies Order By columns for &quot;weights.data&quot;.<br />
Values to this argument can be provided as a vector, if multiple 
columns are used for ordering.<br />
Types: character OR vector of Strings (character)
</p>
</td></tr>
<tr valign="top"><td><code>bias.data</code></td>
<td>

<p>Optional Argument.<br />
Specifies the tbl_teradata generated by <code><a href="td_knn_recommender_mle.html">td_knn_recommender_mle</a></code> containing the 
global, user, and item bias statistics. For S3 <code>predict</code> function, 
this argument is not required. For <code>td_knn_recommender_predict_mle</code> function, 
this is an optional argument. For <code>td_knn_recommender_predict_mle</code> function, 
if this argument is not specified, argument &quot;object&quot; must be specified. 
Whenever the argument &quot;object&quot; is specified, the arguments &quot;weights.data&quot;
and &quot;bias.data&quot; will be overwritten by their equivalent tibbles
within &quot;object&quot; argument.
</p>
</td></tr>
<tr valign="top"><td><code>bias.data.order.column</code></td>
<td>

<p>Optional Argument.<br />
Specifies Order By columns for &quot;bias.data&quot;.<br />
Values to this argument can be provided as a vector, if multiple 
columns are used for ordering.<br />
Types: character OR vector of Strings (character)
</p>
</td></tr>
<tr valign="top"><td><code>userid.column</code></td>
<td>

<p>Optional Argument.<br />
Specifies the user id column in the rating tbl_teradata. The default is the first 
column in the rating tbl_teradata.<br />
Types: character
</p>
</td></tr>
<tr valign="top"><td><code>itemid.column</code></td>
<td>

<p>Optional Argument.<br />
Specifies the item id column in the rating tbl_teradata. The default is the second 
column in the rating tbl_teradata.<br />
Types: character
</p>
</td></tr>
<tr valign="top"><td><code>rating.column</code></td>
<td>

<p>Optional Argument.<br />
Specifies the rating column in the rating tbl_teradata. The default is the third 
column in the rating tbl_teradata.<br />
Types: character
</p>
</td></tr>
<tr valign="top"><td><code>topk</code></td>
<td>

<p>Optional Argument.<br />
Specifies the number of items to recommend for each user. The &quot;topk&quot; highest-rated 
items are recommended.<br />
Default Value: 3<br />
Types: integer
</p>
</td></tr>
<tr valign="top"><td><code>showall</code></td>
<td>

<p>Optional Argument.<br />
Specifies whether the function outputs only the &quot;topk&quot; values or all 
the values in case many recommendations have the same predicted 
rating.<br />
When set to TRUE, and multiple items have the same predicted rating,
the function outputs all these items, regardless of the value of &quot;topk&quot;.
Otherwise, the function outputs at most &quot;topk&quot; items.<br />
Note: &quot;showall&quot; argument support is only available when tdplyr is connected to 
Vantage 1.1.1 or later.<br />
Default Value: TRUE<br />
Types: logical
</p>
</td></tr>
<tr valign="top"><td><code>ratings.data.sequence.column</code></td>
<td>

<p>Optional Argument.<br />
Specifies the vector of column(s) that uniquely identifies each row 
of the input argument &quot;ratings.data&quot;. The argument is used to ensure 
deterministic results for functions which produce results that vary 
from run to run.<br />
Types: character OR vector of Strings (character)
</p>
</td></tr>
<tr valign="top"><td><code>weights.data.sequence.column</code></td>
<td>

<p>Optional Argument.<br />
Specifies the vector of column(s) that uniquely identifies each row 
of the input argument &quot;weights.data&quot;. The argument is used to ensure 
deterministic results for functions which produce results that vary 
from run to run.<br />
Types: character OR vector of Strings (character)
</p>
</td></tr>
<tr valign="top"><td><code>bias.data.sequence.column</code></td>
<td>

<p>Optional Argument.<br />
Specifies the vector of column(s) that uniquely identifies each row 
of the input argument &quot;bias.data&quot;. The argument is used to ensure 
deterministic results for functions which produce results that vary 
from run to run.<br />
Types: character OR vector of Strings (character)
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Function returns an object of class &quot;td_knn_recommender_predict_mle&quot; 
which is a named list containing object of class &quot;tbl_teradata&quot;.<br />
Named list member can be referenced directly with the &quot;$&quot; operator 
using the name: result.
</p>


<h3>Examples</h3>

<pre>
  
    # Get the current context/connection
    con &lt;- td_get_context()$connection
    
    # Load example data.
    loadExampleData("knnrecommender_example", "ml_ratings")
    loadExampleData("knnrecommenderpredict_example", "ml_ratings_10")
    
    # The ml_ratings table has movie ratings from 50 users.
    ml_ratings &lt;- tbl(con, "ml_ratings")
    
    #  Build/generate the KNN Recommender model on the user ratings data
    td_knn_recommender_out &lt;- td_knn_recommender_mle(rating.table = ml_ratings,
                                                 userid.column = "userid",
                                                 itemid.column = "itemid",
                                                 rating.column = "rating"
                                                )
                                          
    # ml_ratings_10 table has movie ratings from a subset of users from the ml_ratings 
    # table. The ml_bias and ml_weights table has the weights and bias values 
    # from the trained KNN Recommender model.
    ml_ratings_10 &lt;- tbl(con, "ml_ratings_10")
    ml_weights &lt;- td_knn_recommender_out$weight.model.table
    ml_bias &lt;- td_knn_recommender_out$bias.model.table
                                               
    # Here "bias.data" and "weights.data" have been made optional with the argument "object"
    # having the td_knn_recommender_mle output object
    td_knn_recommender_predict_out &lt;- td_knn_recommender_predict_mle(
                                                object = td_knn_recommender_out,
                                                ratings.data = ml_ratings_10,
                                                ratings.data.partition.column = c("userid"),
                                                topk = 5
                                               )
    
    # Alternatively use the S3 predict function to make user predictions. 
    td_knn_recommender_predict_out1 &lt;- predict(object = td_knn_recommender_out,
                                                ratings.data = ml_ratings_10,
                                                ratings.data.partition.column = c("userid"),
                                                topk = 5
                                               )
                                               
    # Use the generated model to make user rating predictions. Here the argument "object"
    # has been made optional with the specification of both the arguments "bias.data" and
    # "weights.data"
    td_knn_recommender_predict_out2 &lt;- td_knn_recommender_predict_mle(
                                                ratings.data = ml_ratings_10,
                                                ratings.data.partition.column = c("userid"),
                                                weights.data = ml_weights,
                                                bias.data = ml_bias,
                                                topk = 5
                                               )
  
</pre>

<hr /><div style="text-align: center;">[Package <em>tdplyr</em> version 17.00.00.02 <a href="00Index.html">Index</a>]</div>
</body></html>
