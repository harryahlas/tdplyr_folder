<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Association Rules</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for td_association_valib {tdplyr}"><tr><td>td_association_valib {tdplyr}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Association Rules</h2>

<h3>Description</h3>

<p>Association Rules provide various measures concerning items residing in
groups. The measures, support, confidence, lift and Z Score, help to
determine the likelihood that one or more items exist in a group, given that
another one or more items exist in the same group. The classic example of
this type of study is market basket analysis, in which the groups are
shopping carts and the items are the products purchased in the shopping
carts. An association rule might indicate the likelihood that a given
shopping cart contains oranges, given that it also contains apples.<br />
Association rules consist of a left part and a right part. The left part
consists of one or more items that are given to reside in a group, and the
right part is the consequence that one or more items also reside in the given
group. The measures are defined as follows:<br />
</p>

<ul>
<li><p> Support-Percentage of groups containing the items on the left
(left-side support), on the right (right-side support), or on both sides of a
rule (rule support).
</p>
</li>
<li><p> Confidence-Percentage of groups containing the left-side items that
also contain the right-side items.
</p>
</li>
<li><p> Lift-A measure of how much the probability is raised that the
right-side items occur in a group given that the left-side items occur in the
group.
</p>
</li>
<li><p> Z Score-A statistical measure of how much the expected and actual
values of the number of groups containing all the items in the rule varies.
(Zero means expected and actual are the same.)
</p>
</li></ul>

<p>A sequence analysis may be optionally requested, wherein there is a sequence
of items defined by a &quot;sequence.column&quot; argument, ordering the items on each
side of each rule, with left-side items preceding the rights-side items. An
option called &quot;relaxed.order&quot; is provided, that can be set to TRUE so that
items on the left side and the right side can be in any order provided that
all left-side items precede all right-side items. An output tbl_teradata is
created for each requested rule combination (1-to-1, 2-to-1, and so on).<br />
</p>


<h3>Usage</h3>

<pre>
td_association_valib(data, group.column, item.column, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>data</code></td>
<td>
<p>Required Argument.<br />
Specifies the input data to perform Association analysis.<br />
Types: tbl_teradata</p>
</td></tr>
<tr valign="top"><td><code>group.column</code></td>
<td>
<p>Required Argument.<br />
Specifies the name of the column representing groups
in the association rules.<br />
Types: character</p>
</td></tr>
<tr valign="top"><td><code>item.column</code></td>
<td>
<p>Required Argument.<br />
Specifies the name of the column representing items in
the association rules.<br />
Types: character</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Specifies other arguments supported by the function as described
in the '<b>Other Arguments</b>' section.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Function returns an object of class &quot;td_association_valib&quot;
which is a named list containing objects of class &quot;tbl_teradata&quot;.<br />
Named list members can be referenced directly with the &quot;$&quot; operator
using names as described in the note below.<br />
Note:
</p>

<ol>
<li><p> Output objects of class tbl_teradata generated can be
categorized as follows:
</p>

<ol>
<li><p> Affinity outputs.
</p>
</li>
<li><p> Support outputs.
</p>
</li></ol>

</li>
<li><p> Attribute names of these output objects of class tbl_teradata
can be found out using two attributes:
</p>

<ol>
<li><p> affinity.outputs:<br />
This prints the attribute names of the output objects of class
tbl_teradata containing the affinity results.<br />
For example, this can be accessed as<br />
<code>AssociationObj$affinity.outputs</code>
</p>
</li>
<li><p> support.outputs:<br />
This prints the attribute names of the output objects of class
tbl_teradata containing the support results.<br />
For example, this can be accessed as<br />
<code>AssociationObj$support.outputs</code>
</p>
</li></ol>

</li>
<li><p> Output objects of class tbl_teradata generated by the function
depend upon following:
</p>

<ol>
<li><p> When &quot;process.type&quot; is set to 'support':<br />
</p>

<ol>
<li><p> No affinity outputs are generated.
</p>
</li>
<li><p> Function generates only two support output objects of class
tbl_teradata named as:
</p>

<ol>
<li><p> support.1.item
</p>
</li>
<li><p> group.count
</p>
</li></ol>

</li></ol>

</li>
<li><p> When &quot;no.support.results&quot; is set to TRUE and &quot;process.type&quot;
is set to values other than 'support':
</p>

<ol>
<li><p> Only affinity outputs are generated, based on the number of
combinations requested by the user.
</p>
</li>
<li><p> No support outputs are generated.
</p>
</li></ol>

</li>
<li><p> When &quot;no.support.results&quot; is set to FALSE and &quot;process.type&quot;
is set to values other than 'support':
</p>

<ol>
<li><p> Affinity outputs are generated, based on the number of
combinations requested.
</p>
</li>
<li><p> Support outputs are also generated depending on the
combination(s) requested.
</p>
</li></ol>

</li></ol>

</li></ol>



<h3>Other Arguments</h3>



<h4>combinations</h4>

<p>Optional Argument.<br />
Specifies the combinations of number of items on
left side and number of items on right side of
requested association rules. More than one
combination can also be requested. For each
combination specified, one output tbl_teradata is
generated, i.e., number of outputs objects of class
tbl_teradata generated depends on the number of
combinations. Corresponding output tbl_teradata is
named as &quot;result.&lt;combination&gt;&quot;.<br />
For example,<br />
<code>combinations=c(11, 21)</code><br />
above combinations produces an analysis of 1-to-1
and 2-to-1 rules. This will result in two output
objects of class tbl_teradata 'result.11' and
'result.21'.<br />
Note:
</p>

<ul>
<li><p> If you add the sizes of the left and right
sides of a combination, the sum must be less than
or equal to 5.
</p>
</li></ul>

<p>Default Value: 11<br />
Types: integer OR list of Integers (int)<br /><br />
</p>



<h4>description.data</h4>

<p>Optional Argument.<br />
Specifies the tbl_teradata containing
description data, which is joined with the
result.<br />
Note:
</p>

<ul>
<li><p> Arguments &quot;description.data&quot;,
&quot;description.identifier&quot; and
&quot;description.column&quot;, if used, must be used
together.
</p>
</li></ul>

<p>Types: tbl_teradata<br /><br />
</p>



<h4>description.identifier</h4>

<p>Optional Argument.<br />
Specifies the name of the column in the
&quot;description.data&quot; that is joined with
the result.<br />
Note:
</p>

<ul>
<li><p> Arguments &quot;description.data&quot;,
&quot;description.identifier&quot; and
&quot;description.column&quot;, if used, must be
used together.
</p>
</li></ul>

<p>Types: character<br /><br />
</p>



<h4>description.column</h4>

<p>Optional Argument.<br /> Specifies the name of
the column in the &quot;description.data&quot; that
contains descriptive item names.<br />
Note:
</p>

<ul>
<li><p> Arguments &quot;description.data&quot;,
&quot;description.identifier&quot; and
&quot;description.column&quot;, if used, must be used
together.
</p>
</li></ul>

<p>Types: character<br /><br />
</p>



<h4>group.count</h4>

<p>Optional Argument.<br />
Specifies the count of the number of groups in the
input data. By default it is calculated by the
function. This is useful when you are processing a
reduced input set saved in a previous run, so that
calculations can be based on the number of groups
in the original input set and not the reduced set.<br />
Types: integer<br /><br />
</p>



<h4>hierarchy.data</h4>

<p>Optional Argument.<br />
Specifies the hierarchy data that can be joined
with the input data in order to reduce the amount
of input data and compute association rules at a
different hierarchical level. Use of this argument
has an impact on the data saved in the reduced
input when the argument &quot;reduced.data&quot; is
requested. When this option is utilized, listwise
deletion is automatically performed, ignoring rows
that contain a null group, item, or sequence
column value.<br />
Note:
</p>

<ul>
<li><p> Arguments &quot;hierarchy.data&quot;,
&quot;low.level.column&quot; and &quot;high.level.column&quot;, if
used, must be used together.
</p>
</li></ul>

<p>Types: tbl_teradata<br /><br />
</p>



<h4>low.level.column</h4>

<p>Optional Argument.<br />
Specifies the lowest level item column in the
&quot;hierarchy.data&quot; to be matched with the item
column in the input data.<br />
Note:
</p>

<ul>
<li><p> Arguments &quot;hierarchy.data&quot;,
&quot;low.level.column&quot; and &quot;high.level.column&quot;,
if used, must be used together.
</p>
</li></ul>

<p>Types: character<br /><br />
</p>



<h4>high.level.column</h4>

<p>Optional Argument.<br />
Specifies the higher-level item column in the
&quot;hierarchy.data&quot;.<br />
Note:
</p>

<ul>
<li><p> Arguments &quot;hierarchy.data&quot;,
&quot;low.level.column&quot; and &quot;high.level.column&quot;,
if used, must be used together.
</p>
</li></ul>

<p>Types: character<br /><br />
</p>



<h4>left.lookup.data</h4>

<p>Optional Argument.<br />
Specifies a left-side lookup data that can be
specified to reduce the rules reported to only
those with left-side items that appear in the
lookup dataset.<br />
Note:
</p>

<ul>
<li><p> Arguments &quot;left.lookup.data&quot; and
&quot;left.lookup.column&quot;, if used, must be used
together.
</p>
</li></ul>

<p>Types: tbl_teradata<br /><br />
</p>



<h4>left.lookup.column</h4>

<p>Optional Argument.<br />
Specifies the name of the column to match with
left-side items in rules.<br />
Note:
</p>

<ul>
<li><p> Arguments &quot;left.lookup.data&quot; and
&quot;left.lookup.column&quot;, if used, must be used
together.
</p>
</li></ul>

<p>Types: character<br /><br />
</p>



<h4>right.lookup.data</h4>

<p>Optional Argument.<br />
Specifies a right-side lookup data that can be
specified to reduce the rules reported to only
those with right-side items that appear in the
lookup dataset.<br />
Note:
</p>

<ul>
<li><p> Arguments &quot;right.lookup.data&quot; and
&quot;right.lookup.column&quot;, if used, must be used
together.
</p>
</li></ul>

<p>Types: tbl_teradata<br /><br />
</p>



<h4>right.lookup.column</h4>

<p>Optional Argument.<br />
Specifies the name of the column to match
with right-side items in rules.<br />
Note:
</p>

<ul>
<li><p> Arguments &quot;right.lookup.data&quot; and
&quot;right.lookup.column&quot;, if used, must be used
together.
</p>
</li></ul>

<p>Types: character<br /><br />
</p>



<h4>min.confidence</h4>

<p>Optional Argument.<br />
Specifies the minimum value that the confidence
measure of an association rule must have before
it is included in a result. The range of valid
values is 0 to 1 inclusive.<br />
Types: numeric<br /><br />
</p>



<h4>min.lift</h4>

<p>Optional Argument.<br />
Specifies the minimum value that the lift measure of an
association rule must have before it is included in a
result. The range of valid values is 0 to any positive
numeric value.<br />
Types: numeric<br /><br />
</p>



<h4>min.support</h4>

<p>Optional Argument.<br />
Specifies the minimum value that the support measure
of an association rule must have before it is
included in a result. When this argument is utilized,
the size of the input data is reduced, potentially
impacting the use of the &quot;reduced.data&quot; argument.
Use of this argument also causes listwise deletion
to be performed, skipping any input rows that have a
null group, item or sequence column value. The range
of valid values is 0 to 1 inclusive.<br />
Types: numeric<br /><br />
</p>



<h4>min.zscore</h4>

<p>Optional Argument.<br />
Specifies the minimum value that the Z Score measure
of an association rule must have before it is included
in a result.<br />
Types: numeric<br /><br />
</p>



<h4>order.prob</h4>

<p>Optional Argument.<br />
Specifies the probability of correct ordering for
sequential analysis. When sequence analysis is being
performed, by default the algorithm determines
ordering probabilities. Value should be non-zero
between 0 and 1 (Setting it to 1 effectively ignores
this principle in lift and Z Score calculations).<br />
Types: numeric<br /><br />
</p>



<h4>process.type</h4>

<p>Optional Argument.<br />
Specifies the type of processing.<br />
Permitted Values:
</p>

<ul>
<li><p> 'all' - All processing is performed, from
building support tables to calculating final
affinities.
</p>
</li>
<li><p> 'support' - The single item support result
tbl_teradata is built and then processing is halted.
This allows user to view the support result and
decide what the minimum support value should be,
thus reducing the amount of processing performed.
The single item support output tbl_teradata is named
as 'support.1.item' and underlying output table is
named as 'ml__valib_association_1_ITEM_SUPPORT'.
If &quot;support.result.prefix&quot; is specified, it replaces
'ml__valib_association' with the provided value in
the support table name.
</p>
</li>
<li><p> 'recalculate' - The final affinity tables are
calculated based on support tables already present.
This requires that the &quot;no.support.results&quot;
parameter was set to FALSE in a previous run so that
the support tables are available for recalculating
the final affinities.
</p>
</li></ul>

<p>Default Value: 'all'<br />
Types: character<br /><br />
</p>



<h4>reduced.data</h4>

<p>Optional Argument.<br />
Specified the reduced input data. If input to the
analysis is reduced by using the &quot;min.support&quot;, a
&quot;hierarchy.data&quot;, or a &quot;filter&quot;, the resulting
reduced input data can be saved for further
analysis.<br />
Notes:
</p>

<ul>
<li><p> This is not affected by the use of a left-side
or right-side lookup argument or a &quot;min.confidence&quot;,
&quot;min.lift&quot;, or &quot;min.zscore&quot; arguments.
</p>
</li>
<li><p> If further analysis is performed on this data,
it may be appropriate to use the &quot;group.count&quot;
argument.
</p>
</li></ul>

<p>Types: tbl_teradata<br /><br />
</p>



<h4>relaxed.order</h4>

<p>Optional Argument.<br />
Use this option in conjunction with sequence
analysis, that is, when a sequence column is
specified. Relaxed ordering occurs when the items
on the left side of an association rule may occur
in any order (via the sequence column), and the
same is the case with the right-side items,
provided that all left-side items precede all
right-side items.<br />
Types: logical<br /><br />
</p>



<h4>sequence.column</h4>

<p>Optional Argument.<br />
Specifies the name of the column providing
sequencing of input items if sequence analysis is
desired. This might typically be a column of type
date or timestamp. By default, sequence analysis
is not performed.<br />
Types: character<br /><br />
</p>



<h4>filter</h4>

<p>Optional Argument.<br />
Specifies the clause to filter rows selected for analysis
within Association Rules.<br />
For example,<br />
<code>filter = "cust_id &gt; 0"</code><br />
Note:
</p>

<ul>
<li><p> Single quotes within the parameter value must be
doubled, such as in where=channel &lt;&gt; &rdquo; &rdquo;. (Ordinarily,
the expression would be where=channel &lt;&gt; ' '. Instead,
the expression ends with quote-quote-blank-quote-quote).
</p>
</li></ul>

<p>Types: character<br /><br />
</p>



<h4>no.support.results</h4>

<p>Optional Argument.<br />
Specifies whether the intermediate support
results are required or not. By default,
support results are not presented in the
output.<br />
Notes:
</p>

<ul>
<li><p> If &quot;no.support.results&quot; is FALSE and
&quot;support.result.prefix&quot; is not used, then the
generated underlying support tables are
overwritten, if they already exist.
</p>
</li>
<li><p> When set to TRUE, support results
generated depends on &quot;combinations&quot; parameter.
</p>
</li></ul>

<p>Default Value: TRUE<br />
Types: logical<br /><br />
</p>



<h4>support.result.prefix</h4>

<p>Optional Argument.<br />
Specifies a string that should be used to
as prefix for the underlying table name
for the support tables which can be
accessed using output objects of class
tbl_teradata.<br />
Notes:
</p>

<ul>
<li><p> Teradata recommends using this when
function is to be executed with
&quot;process.type&quot; as 'recalculate'. Make sure
to use the same value for both the function
calls.
</p>
</li>
<li><p> If &quot;no.support.results&quot; is FALSE and
this is not used, then the generated
underlying support tables are overwritten,
if they already exist.
</p>
</li></ul>

<p>Default Value: 'ml__valib_association'<br />
Types: character<br /><br />
</p>



<h3>Examples</h3>

<pre>

# Notes:
#   1. To execute Vantage Analytic Library functions, set option
#      'val.install.location' to the database name where Vantage analytic
#      library functions are installed.
#   2. Datasets used in these examples can be loaded using Vantage Analytic
#      Library installer.

# Set the option 'val.install.location'.
options(val.install.location = "SYSLIB")

# Get remote data source connection.
con &lt;- td_get_context()$connection

# Create an object of class "tbl_teradata".
df &lt;- tbl(con, "credit_tran")
print(df)


# Example 1: Perform Association analysis using default values.
obj &lt;- td_association_valib(data=df, group.column="cust_id",
                            item.column="channel")

# Print the affinity result. Only affinity result for default combination 11
# is produced.
print(obj$result.11)

# Example 2: Requests a 1-to-1 and a 2-to-1 analysis, while also requesting
#            0.1 minimum support. Rows with blank channel column are also
#            filtered.
# Note: The blank channel value requires double single quotes,
#       that is quote-quote-blank-quote-quote.
obj &lt;- td_association_valib(data=df,
                            group.column=c("cust_id"),
                            item.column="channel",
                            min.support=0.1,
                            filter="channel &lt;&gt;''''",
                            combinations=c(11, 21))

# Executing above call will return two affinity results. Let's check the
# names of the output objects of class tbl_teradata.
print(obj$affinity.outputs)

# Print the results.
print(obj$result.11)
print(obj$result.21)

# Example 3: Request sequence analysis by specifying a "sequence.column"
#            parameter. Also include optional parameters "min.support" and
#            "filter".
obj &lt;- td_association_valib(data=df,
                            group.column=c("cust_id"),
                            item.column="channel",
                            min.support=0.1,
                            filter="channel &lt;&gt;''''",
                            sequence.column="tran_date")

# Executing above call will return one affinity result. Let's check the name
# of the output tbl_teradata.
print(obj$affinity.outputs)

# Print the results.
print(obj$result.11)

# Example 4: Let's generate the support results first and then calculate the
#            final affinity results.
# To generate the support results, we set "no.support.results" to FALSE and
# use 'test_prefix' as a prefix for the table names for the support tables
# generated.
obj &lt;- td_association_valib(data=df,
                            group.column=c("cust_id"),
                            item.column="channel",
                            no.support.results=FALSE,
                            support.result.prefix="test_prefix")

# Print the results.
print(obj)

# Let's look at the attribute names of the support results generated.
print(obj$support.outputs)

# Print the individual support results.
print(obj$support.result.01)
print(obj$support.result.11)

# Let's look at the attribute names of the affinity results generated.
print(obj$affinity.outputs)

# Print the affinity results.
print(obj$result.11)

# Re-run the Association function with "process.type" set to 'recalculate'
# for recalculation of affinity results.
# To recalculate we shall use the support results generated by the previous
# function call.
obj &lt;- td_association_valib(data=df,
                            group.column=c("cust_id"),
                            item.column="channel",
                            process.type="recalculate",
                            support.result.prefix="test_prefix")

# Print the affinity results.
print(obj$result.11)


</pre>

<hr /><div style="text-align: center;">[Package <em>tdplyr</em> version 17.00.00.02 <a href="00Index.html">Index</a>]</div>
</body></html>
