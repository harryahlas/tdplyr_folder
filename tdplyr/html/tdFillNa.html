<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: FillNa</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for tdFillNa {tdplyr}"><tr><td>tdFillNa {tdplyr}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>FillNa<br /></h2>

<h3>Description</h3>

<p><code>tdFillNa()</code> allows user to perform missing value/null replacement
transformations.<br />
Note:
</p>

<ul>
<li><p> Object of this class is passed to &quot;fillna&quot; argument of
<code>td_transform_valib()</code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre>
tdFillNa(columns=NULL, datatype=NULL, style="mean", value=NULL)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>columns</code></td>
<td>
<p>Optional Argument.<br />
Specifies name(s) of column(s) containing the input and
output column names, where key is the name of the column to
perform transformation on and value contains the name of
the transformed output column. When only key is specified
then output column name is the name of input column.<br />
Types: character OR list of Strings (character)</p>
</td></tr>
<tr valign="top"><td><code>datatype</code></td>
<td>
<p>Optional Argument.<br />
Specifies the name of the intended datatype of the output
column.<br />
Intended data types for the output column can be specified
using the permitted strings below:
</p>

<table summary="Rd table">
<tr>
 <td style="text-align: left;">
------------------------------------ </td><td style="text-align: left;"> ---------------------------------------</td>
</tr>
<tr>
 <td style="text-align: left;">
<b>If intended SQL Data Type is</b> </td><td style="text-align: left;"> <b>Permitted Value to be passed is</b></td>
</tr>
<tr>
 <td style="text-align: left;">
------------------------------------ </td><td style="text-align: left;"> ---------------------------------------</td>
</tr>
<tr>
 <td style="text-align: left;">
bigint </td><td style="text-align: left;"> bigint</td>
</tr>
<tr>
 <td style="text-align: left;">
byteint </td><td style="text-align: left;"> byteint</td>
</tr>
<tr>
 <td style="text-align: left;">
char(n) </td><td style="text-align: left;"> char,n</td>
</tr>
<tr>
 <td style="text-align: left;">
date </td><td style="text-align: left;"> date</td>
</tr>
<tr>
 <td style="text-align: left;">
decimal(m,n) </td><td style="text-align: left;"> decimal,m,n</td>
</tr>
<tr>
 <td style="text-align: left;">
float </td><td style="text-align: left;"> float</td>
</tr>
<tr>
 <td style="text-align: left;">
integer </td><td style="text-align: left;"> integer</td>
</tr>
<tr>
 <td style="text-align: left;">
number(<code>*</code>) </td><td style="text-align: left;"> number</td>
</tr>
<tr>
 <td style="text-align: left;">
number(n) </td><td style="text-align: left;"> number,n</td>
</tr>
<tr>
 <td style="text-align: left;">
number(<code>*</code>,n) </td><td style="text-align: left;"> number,<code>*</code>,n</td>
</tr>
<tr>
 <td style="text-align: left;">
number(n,n) </td><td style="text-align: left;"> number,n,n</td>
</tr>
<tr>
 <td style="text-align: left;">
smallint </td><td style="text-align: left;"> smallint</td>
</tr>
<tr>
 <td style="text-align: left;">
time(p) </td><td style="text-align: left;"> time,p</td>
</tr>
<tr>
 <td style="text-align: left;">
timestamp(p) </td><td style="text-align: left;"> timestamp,p</td>
</tr>
<tr>
 <td style="text-align: left;">
varchar(n) </td><td style="text-align: left;"> varchar,n
</td>
</tr>

</table>

<p>Notes:
</p>

<ol>
<li><p> Argument is ignored if &quot;columns&quot; argument is not used.
</p>
</li>
<li><p> char without a size is not supported.
</p>
</li>
<li><p> number(<code>*</code>) does not include the * in its datatype
format.
</p>
</li></ol>

<p>Examples:
</p>

<ol>
<li><p> If intended datatype for the output column is 'bigint',
then pass string 'bigint' to the argument as shown below:<br />
<code>datatype="bigint"</code>
</p>
</li>
<li><p> If intended datatype for the output column is
'decimal(3,5)',  then pass string 'decimal,3,5' to the
argument as shown below:<br />
<code>datatype="decimal,3,5"</code>
</p>
</li></ol>

<p>Types: character</p>
</td></tr>
<tr valign="top"><td><code>style</code></td>
<td>
<p>Optional Argument.<br />
Specifies the nullstyle for missing value/null value
replacement.<br />
A literal value, the mean, median, mode, or an imputed value
joined from another object of class tbl_teradata can be used
as the replacement value. The median value can be requested
with or without averaging of two middle values when there is
an even number of values.<br />
Literal value replacement is supported for numeric, character,
and date data types.<br />
Mean value replacement is supported for columns of numeric
type or date type.<br />
Median without averaging, mode, and imputed value replacement
are valid for any supported type. Median with averaging is
supported only for numeric and date type.<br />
Permitted Values: 'literal', 'mean', 'median', 'mode',
'median_wo_mean', 'imputed'<br />
Default Value: 'mean'<br />
Types: character</p>
</td></tr>
<tr valign="top"><td><code>value</code></td>
<td>
<p>Optional Argument. Required when &quot;style&quot; is 'literal' or
'imputed'.<br />
Specifies the value to be used for null replacement
transformations.<br />
Notes:
</p>

<ol>
<li><p> When &quot;style&quot; is 'imputed', &quot;value&quot; must be an object of
class tbl_teradata.
</p>
</li>
<li><p> When &quot;style&quot; is 'literal', &quot;value&quot; can be of any type.
</p>
</li>
<li><p> If date values are entered, the keyword 'DATE' must
precede the date value, and cannot be enclosed in single
quotes.<br />
For example,<br />
<code>value='DATE 1987-06-09'</code><br />
</p>
</li></ol>

<p>Types: tbl_teradata, logical, integer, numeric, character</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of tdFillNa class.
</p>


<h3>Examples</h3>

<pre>

# Notes:
# 1. To run any transformation, user needs to use td_transform_valib()
#    function.
# 2. To do so set option 'val.install.location' to the database name
#    where Vantage analytic library functions are installed.
# 3. Datasets used in these examples can be loaded using Vantage Analytic
#    Library installer.

# Get the current context/connection
con &lt;- td_get_context()$connection

# Set the option 'val.install.location'.
options(val.install.location = "SYSLIB")

# Create object(s) of class "tbl_teradata".
sales &lt;- tbl(con, "sales")
sales

employee_info &lt;- tbl(con, "employee_info")
employee_info

# Example 1: Replace missing values in columns 'Jan' and 'Mar', with
#            a literal value 0. Output columns are named as 'january' and
#            'march' respectively.
#            Perform the missing value transformation using
#            td_transform_valib() function from Vantage Analytic Library.

# Create tdFillNa object.
fillna_literal &lt;- tdFillNa(style="literal", value=0,
                           columns=list("Jan"="january", "Mar"="march"))

# Perform the missing value transformation using td_transform_valib().
obj &lt;- td_transform_valib(data=sales, fillna=fillna_literal,
                          key.columns="accounts")
obj$result

# Example 2: Replace missing values in column 'Jan' with 'median' value from
#            that column. Output column produced in the output is named as
#            'Jan2'.
#            Perform the missing value transformation using
#            td_transform_valib() function from Vantage Analytic Library.

# Create tdFillNa object.
fillna_median &lt;- tdFillNa(style="median", columns=list("Jan"="Jan2"))

# Perform the missing value transformation using td_transform_valib().
obj &lt;- td_transform_valib(data=sales, fillna=fillna_median,
                          key.columns="accounts")
obj$result

# Example 3: Replace missing values in column 'Apr' with a median value
#            without mean from that column.
#            Perform the missing value transformation using
#            td_transform_valib() function from Vantage Analytic Library.

fillna_mwm &lt;- tdFillNa(style="median_wo_mean", columns="Apr")

# Perform the missing value transformation using td_transform_valib().
obj &lt;- td_transform_valib(data=sales, fillna=fillna_mwm,
                          key.columns="accounts")
obj$result

# Example 4: Replace missing values in column 'Apr' with 'mode' value from
#            that column. Output column produced in the output is named as
#            'Apr2000'.
#            Perform the missing value transformation using
#            td_transform_valib() function from Vantage Analytic Library.

fillna_mode &lt;- tdFillNa(style="mode", columns=list("Apr"="Apr2000"))

# Perform the missing value transformation using td_transform_valib().
obj &lt;- td_transform_valib(data=sales, fillna=fillna_mode,
                          key.columns="accounts")
obj$result

# Example 5: Replace missing values in columns 'masters' and 'programming'
#            using 'imputed' style.
#            Perform the missing value transformation using
#            td_transform_valib() function from Vantage Analytic Library.

# Create object(s) of class "tbl_teradata".
admissions_train_nulls &lt;- tbl(con, "admissions_train_nulls")
admissions_train_nulls

admissions_train &lt;- tbl(con, "admissions_train")
admissions_train

# Replace NULL values in the columns 'masters' and 'programming'
# in admissions_train_nulls dataframe with the values in the corresponding
# column's values in admissions_train dataframe.
fillna_imputed &lt;- tdFillNa(style="imputed", value=admissions_train,
                           columns=c("masters", "programming"))

# Perform the missing value transformation using td_transform_valib().
obj &lt;- td_transform_valib(data=admissions_train_nulls, fillna=fillna_imputed,
                          key.columns="id")
obj$result

# Example 6: This example shows how one can operate on date and character
#            columns. Example also showcases using multiple missing value
#            treatment techniques in one single call for variable
#            transformation.

# Create object(s) of class "tbl_teradata".
employee_info &lt;- tbl(con, "employee_info")

# Using literal style for missing value treatment on a date type
# column 'joined_date.'
fillna_1 &lt;- tdFillNa(style="literal", value="DATE 1995-12-23",
                     columns=list("joined_date"="date1"))

# Using literal style for missing value treatment on a character type
# column 'first_name'. Replace missing values with 'FNU', i.e.,
# First Name Unknown.
fillna_2 &lt;- tdFillNa(style="literal", value="FNU",
                     columns=list("first_name"="char1"))

# Using mean value for missing value treatment on a date type
# column 'joined_date'.
fillna_3 &lt;- tdFillNa(style="mean", columns=list("joined_date"="date2"))


# Using median value for missing value treatment on a date type
# column 'joined_date'.
fillna_4 &lt;- tdFillNa(style="median", columns=list("joined_date"="date2A"))

# Using median value without mean for missing value treatment on a date type
# column 'joined_date'.
fillna_5 &lt;- tdFillNa(style="median_wo_mean",
                     columns=list("joined_date"="date3"))
# Using mode value for missing value treatment on a date type
# column 'joined_date'.
fillna_6 &lt;- tdFillNa(style="mode", columns=list("joined_date"="date4"))

# Using median value without mean for missing value treatment on a character
# type column 'first_name'.
fillna_7 &lt;- tdFillNa(style="median_wo_mean",
                     columns=list("first_name"="char2"))

# Using mode value for missing value treatment on a character type column
# 'first_name'.
fillna_8 &lt;- tdFillNa(style="mode", columns=list("first_name"="char3"))

# Perform the missing value transformations using td_transform_valib().
obj &lt;- td_transform_valib(data=employee_info,
                          fillna=c(fillna_1, fillna_2, fillna_3, fillna_4,
                                   fillna_5, fillna_6, fillna_7, fillna_8),
                          key.columns="employee_no")
obj$result


</pre>

<hr /><div style="text-align: center;">[Package <em>tdplyr</em> version 17.00.00.02 <a href="00Index.html">Index</a>]</div>
</body></html>
